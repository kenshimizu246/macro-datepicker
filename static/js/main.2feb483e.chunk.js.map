{"version":3,"sources":["left-arrow.svg","right-arrow.svg","utils.js","macro-date-input.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","WEEKS","isBz","v","moment","isMoment","isoWeekday","m2d","t","isBizDate","adj","match","n","Number","add","i","ww","w","s","format","f","month","isValid","d","m","o","clone","subtract","dtAdj","monthFormat","months","MacroDateInput","props","_this","dateFormat","date","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","undefined","defaultValue","baseDate","state","value","macro","calendar","open","e","setState","currentTarget","id","target","console","log","key","macro2date","defaultFormat","header","_this2","react_default","a","createElement","className","mm","sm","days","opts","map","year","dt","startOf","day","dd","cls","onClick","selectedDate","bind","thisMonth","prevMonth","src","larrow","alt","name","onChange","monthSelected","nextMonth","rarrow","openOnFocus","doClickCalendar","type","onKeyPress","handleKeyPress","onBlur","handleBlur","onFocus","handleOnFocus","handleInputChange","dateInput","renderDateInput","renderCalendar","Component","Boolean","window","location","hostname","descr","ReactDOM","render","macro_date_input","fmt","holidays","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2feb483e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/left-arrow.c1c96d64.svg\";","module.exports = __webpack_public_path__ + \"static/media/right-arrow.bab52b5d.svg\";","import moment from 'moment';\n\nconst WEEKS = [\"na\",\"mo\",\"tu\",\"we\",\"th\",\"fr\",\"st\",\"su\"];\n\n/**\n * This is date adjustment function.\n * \n * @param a date to be determine whether bisiness date or not.\n * @return the result must be true or false.\n **/\nexport const isBz = (v) => {\n\tconst fmt = \"MM/DD/YYYY\";\n\n\tif(moment.isMoment(v)){\n\t\tif(v.isoWeekday() === 7 || v.isoWeekday() === 6){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n/**\n * This is date adjustment function.\n * \n * @param a date to be determine whether bisiness date or not.\n * @param test function whether a date is bisiness date or not.\n * @return calculated date if it contains a macro.\n **/\nconst dtAdj = (d,isBizDate) => {\n\tconst m = d.month();\n\tconst o = d.clone();\n\n\twhile(!isBizDate(d)){\n\t\td.add(1, \"d\");\n\t}\n\tif(m != d.month()){\n\t\td = o;\n\t\twhile(!isBizDate(d)){\n\t\t\td.subtract(1, \"d\");\n\t\t}\n\t}\n\treturn d;\n}\n\n/**\n * This function resolves a macro if it contains, for example; \n * \t2d -> 2 days\n * \t2bd -> 2 bisiness days\n * \t2m -> the month after next month\n * \t2m2tu -> the second Tuesday of the month after next month\n * \t2m2 -> the second day of the month after next month\n * \t1m31 -> the last day of the next month\n * \n * Also it accepts noAdj option. The default behavior is it escapes holidays, Saturday or Sunday.\n * This option disable this default behavior. For example, \"2m2tu noAdj\".\n * \n * @param value it is possible to contain macro.\n * @param base date  \n * @param isBizDate calculator  \n * @return calculated date if it contains a macro.\n **/\nexport const m2d = (v,t,isBizDate) => {\n\tif(typeof(v) === 'string'){\n\t\tlet adj = true;\n\t\tif(v.match(/noAdj/i)){\n\t\t\tadj = false;\n\t\t}\n\t\tif(v.match(/^\\d+d/i)){\n\t\t\tconst n = Number(v.match(/^\\d+/));\n\t\t\tt.add(Number(n), \"d\");\n\t\t\twhile(adj && !isBizDate(t)){\n\t\t\t\tt.add(1, \"d\");\n\t\t\t}\n\t\t\treturn t;\n\t\t} else if(v.match(/^\\d+bd/i)){\n\t\t\tconst n = Number(v.match(/^\\d+/));\n\t\t\tlet i = 0;\n\n\t\t\twhile(i < n){\n\t\t\t\tt.add(1, \"d\");\n\t\t\t\tif(isBizDate(t)){\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn t;\n\t\t}\n\n\t\tif(v.match(/^\\d+m/i)){\n\t\t\tconst n = Number(v.match(/^\\d+/));\n\t\t\tt = t.add(n, \"M\");\n\t\t}\n\n\t\tconst ww = v.match(/\\d+(su|mo|tu|we|th|fr|st)/i);\n\t\tif(ww !== null){\n\t\t\tconst w = ww[0];\n\t\t\tlet s = moment(t.format(\"YYYY-MM-01\"), \"YYYY-MM-DD\");\n\n\t\t\t// weekday for first day of month to count weekday.\n\t\t\tconst f = WEEKS[s.isoWeekday()];\n\t\t\tconst m = t.month();\n\t\t\tfor(let i = 0; i <= 5;){\n\t\t\t\tif(WEEKS[s.isoWeekday()] === f){\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t\tif(w == (i+WEEKS[s.isoWeekday()])){\n\t\t\t\t\tt = s;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ts.add(1, \"d\");\n\t\t\t}\n\t\t} else if(v.match(/^\\d+m\\d+$/i)){\n\t\t\tfor(let n = v.match(/\\d+$/); n > 0; n--){\n\t\t\t\tlet s = moment(t.format(\"YYYY-MM-\")+n, \"YYYY-MM-DD\");\n\t\t\t\tif(moment.isMoment(s) && s.isValid()){\n\t\t\t\t\t\tt = s;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(adj) {\n\t\t\tt = dtAdj(t,isBizDate);\n\t\t}\n\t\treturn t;\n\t}\n\treturn v;\n}\n\n\n","import React, { Component } from 'react';\nimport larrow from './left-arrow.svg';\nimport rarrow from './right-arrow.svg';\nimport './calendar.css';\n\nimport moment from 'moment';\nimport {isBz, m2d} from './utils';\n\nconst monthFormat = \"YYYY-MM-01\";\nconst months = [ \"January\", \"February\", \"March\", \"April\",\n            \"May\", \"June\", \"July\", \"August\", \"September\",\n            \"October\", \"November\", \"December\" ];\n\nclass MacroDateInput extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tlet dateFormat;\n\t\tlet date;\n\t\tlet baseDate;\n\n\t\tif(props.dateFormat === undefined){\n\t\t\tdateFormat = \"YYYY-MM-DD\";\n\t\t}\telse {\n\t\t\tdateFormat  = props.dateFormat;\n\t\t}\n\n\t\tif(props.defaultValue === undefined){\n\t\t\tdate = moment();\n\t\t}\telse {\n\t\t\tdate = moment(props.defaultValue, props.dateFormat);\n\t\t}\n\n\t\tif(props.baseDate === undefined){\n\t\t\tbaseDate = moment();\n\t\t}\telse {\n\t\t\tbaseDate = moment(props.baseDate, props.dateFormat);\n\t\t}\n\n\t\tthis.state = {\n\t\t\tdateFormat: dateFormat,\n\t\t\tvalue: date.format(dateFormat),\n\t\t\tmacro: \"\",\n\t\t\tcalendar: date.format(monthFormat),\n\t\t\topen: false,\n\t\t};\n\t}\n\n\tnextMonth(e){\n\t\tlet d = moment(this.state.calendar, monthFormat);\n\t\td = d.add(1, 'months');\n\t\tthis.setState({calendar: d.format(monthFormat)});\n\t}\n\n\tprevMonth(e){\n\t\tlet d = moment(this.state.calendar, monthFormat);\n\t\td = d.subtract(1, 'months');\n\t\tthis.setState({calendar: d.format(monthFormat)});\n\t}\n\n\tselectedDate(e){\n\t\tlet d = moment(e.currentTarget.id, this.state.dateFormat);\n\t\tthis.setState({value: d.format(this.state.dateFormat),\n\t\t\t\t\t\t\t\t\tcalendar: d.format(monthFormat),\n\t\t\t\t\t\t\t\t\tmacro: \"\"});\n\t}\n\n\tmonthSelected(e){\n\t\tlet v = moment(e.currentTarget.value, monthFormat);\n\t\tthis.setState({calendar: e.currentTarget.value});\n\t}\n\n\tdoClickCalendar(){\n\t\tthis.setState({open: !this.state.open});\n\t}\n\n\thandleInputChange(e){\n\t\tlet v = e.target.value;\n\t\tif(typeof(v) === 'string' && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n\t\t\tlet d = moment(v, this.state.dateFormat);\n\t\t\tthis.setState({value: d.format(this.state.dateFormat),\n\t\t\t\t\t\t\t\t\t\tcalendar: d.format(monthFormat),\n\t\t\t\t\t\t\t\t\t\tmacro: \"\"});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tvalue: e.target.value\n\t\t\t});\n\t\t}\n\t}\n\n\thandleKeyPress(e){\n\t\tconsole.log(\"key:\"+e.key);\n\t\tlet v = this.state.value;\n\t\tlet d;\n\t\tlet macro2date = (this.props.macro2date === undefined ? m2d : this.props.macro2date);\n\t\tlet isBizDate = (this.props.isBizDate === undefined ? isBz : this.props.isBizDate);\n\n\t\tif(e.key == 'Enter'){\n\t\t\td = macro2date(v,moment(this.state.baseDate, this.state.defaultFormat),isBizDate);\n\t\t\tif(moment.isMoment(d)){\n\t\t\t\tthis.setState({value: d.format(this.state.dateFormat),\n\t\t\t\t\t\t\t\t\t\t\tcalendar: d.format(monthFormat),\n\t\t\t\t\t\t\t\t\t\t\tmacro: v});\n\t\t\t} else {\n\t\t\t\tthis.setState({value: v});\n\t\t\t}\n\t\t} else if(typeof(v) === 'string' && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n\t\t\td = moment(v, this.state.dateFormat);\n\t\t\t\tthis.setState({value: d.format(this.state.dateFormat),\n\t\t\t\t\t\t\t\t\t\t\tcalendar: d.format(monthFormat),\n\t\t\t\t\t\t\t\t\t\t\tmacro: \"\"});\n\t\t}\n\t}\n\n\thandleBlur(e){\n\t\tlet macro2date = (this.props.macro2date === undefined ? m2d : this.props.macro2date);\n\t\tlet isBizDate = (this.props.isBizDate === undefined ? isBz : this.props.isBizDate);\n\t\tlet v = this.state.value;\n\t\tlet d = macro2date(v,moment(this.state.baseDate, this.state.defaultFormat),isBizDate);\n\n\t\tif(typeof(v) === 'string' && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n\t\t\td = moment(v, this.state.dateFormat);\n\t\t\tv = \"\";\n\t\t}\n\n\t\tif(moment.isMoment(d)){\n\t\t\tthis.setState({value: d.format(this.state.dateFormat),\n\t\t\t\t\t\t\t\t\t\tcalendar: d.format(monthFormat),\n\t\t\t\t\t\t\t\t\t\tmacro: v});\n\t\t} else {\n\t\t\tthis.setState({value: v});\n\t\t}\n\t}\n\n\trenderCalendar(){\n\t\tlet control;\n\t\tlet header;\n\t\tlet date = moment(this.state.calendar, this.state.dateFormat);\n\n\t\theader = (\n          <div className=\"header\">\n            <div className=\"hcell\">Su</div>\n            <div className=\"hcell\">Mo</div>\n            <div className=\"hcell\">Tu</div>\n            <div className=\"hcell\">We</div>\n            <div className=\"hcell\">Th</div>\n            <div className=\"hcell\">Fr</div>\n            <div className=\"hcell\">Sa</div>\n          </div>\n\t\t);\n\n\t\tlet mm = [];\n\t\tlet sm = date.clone();\n\t\tsm.subtract(3, 'months');\n\t\tfor(let i = 0; i < 12; i++){\n\t\t\tmm[i] = sm.clone();\n\t\t\tsm = sm.add(1, 'months');\n\t\t}\n\t\tlet opts = mm.map(a => {\n\t\t\treturn (<option value={a.format(monthFormat)}>{months[a.month()] + \" \" + a.year()}</option>);\n\t\t});\n\n\t\tlet days;\t\n\t\tlet dt = date.startOf('month');\n\t\tlet m = dt.month();\n\t\twhile(dt.day() != 0){\n\t\t\tdt = dt.subtract(1, 'days');\n\t\t}\n\n\t\tlet dd = [];\n\t\tfor(let i = 0; i < (7*6); i++){\n\t\t\tdd[i] = dt.clone();\n\t\t\tdt.add(1, 'days');\n\t\t}\n\n\t\tdays = dd.map(d => {\n\t\t\tlet cls = \"rcell\";\n\t\t\tif(!isBz(d)){\n\t\t\t\tcls += \" off\";\n\t\t\t}\n\t\t\tif(m != d.month()){\n\t\t\t\tcls += \" not-this-month\";\n\t\t\t}\n\t\t\tif(d.format(this.state.dateFormat) === this.state.value) {\n\t\t\t\tcls += \" selected-date\";\n\t\t\t}\n\t\t\treturn (<div className={cls} id={d.format(this.state.dateFormat)} onClick={this.selectedDate.bind(this)}>{d.format(\"D\")}</div>);\n\t\t});\n\t\tlet thisMonth = this.state.calendar;\n\t\n\t\treturn (\n\t\t\t\t<div className=\"calender\" id=\"calendar\">\n\t\t\t\t\t<div className=\"control\">\n\t\t\t\t\t\t<div className=\"button-prev\" onClick={this.prevMonth.bind(this)}><img src={larrow} className=\"arrow\" alt=\"previous month\" /></div>\n\t\t\t\t\t\t<select name=\"select-month\" value={thisMonth} onChange={this.monthSelected.bind(this)}>\n\t\t\t\t\t\t\t{opts}\n \t\t\t\t\t\t</select>\n\t\t\t\t\t\t<div className=\"button-next\" onClick={this.nextMonth.bind(this)}><img src={rarrow} className=\"arrow\" alt=\"next month\" /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"main\">\n\t\t\t\t\t\t{header}\n\t\t\t\t\t\t{days}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t);\n\t}\n\n\thandleOnFocus(e){\n\t\tif(this.props.openOnFocus){\n\t\t\tthis.doClickCalendar();\n\t\t}\n\t}\n\n\trenderDateInput(){\n\t\treturn (\n      <div className=\"field-component\">\n        <div className=\"input-field-box\">\n          <input type=\"text\" className=\"input-field\"\n\t\t\t\t\t\tonKeyPress={this.handleKeyPress.bind(this)}\n\t\t\t\t\t\tonBlur={this.handleBlur.bind(this)} // onFocusOut\n\t\t\t\t\t\tonFocus={this.handleOnFocus.bind(this)} // onFocusOut\n\t\t\t\t\t\tonChange={this.handleInputChange.bind(this)}\n\t\t\t\t\t\tvalue={this.state.value}/>\n        </div>\n        <div className=\"button-open\" onClick={this.doClickCalendar.bind(this)}>O</div>\n      </div>\n\t\t);\n\t}\n\n  render() {\n\t\tlet dateInput;\n\t\tlet calendar;\n\t\n\t\tdateInput = this.renderDateInput();\n\t\tif(this.state.open){\n\t\t\tcalendar = this.renderCalendar();\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"calendar-input-field\">\n\t\t\t\t{dateInput}\n\t\t\t\t{calendar}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default MacroDateInput;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport MacroDateInput from './macro-date-input';\nimport * as serviceWorker from './serviceWorker';\nimport moment from 'moment';\n\nconst isBz = (v) => {\n\tconst fmt = \"MM/DD/YYYY\";\n\tlet holidays = {};\n\tholidays[\"01/01/2019\"] = moment(\"01/01/2019\", fmt);\n\tholidays[\"01/14/2019\"] = moment(\"01/14/2019\", fmt);\n\tholidays[\"02/11/2019\"] = moment(\"02/11/2019\", fmt);\n\tholidays[\"03/21/2019\"] = moment(\"03/21/2019\", fmt);\n\tholidays[\"04/29/2019\"] = moment(\"04/29/2019\", fmt);\n\tholidays[\"04/30/2019\"] = moment(\"04/30/2019\", fmt);\n\tholidays[\"05/01/2019\"] = moment(\"05/01/2019\", fmt);\n\tholidays[\"05/02/2019\"] = moment(\"05/02/2019\", fmt);\n\tholidays[\"05/03/2019\"] = moment(\"05/03/2019\", fmt);\n\tholidays[\"05/06/2019\"] = moment(\"05/06/2019\", fmt);\n\tholidays[\"07/15/2019\"] = moment(\"07/15/2019\", fmt);\n\tholidays[\"08/12/2019\"] = moment(\"08/12/2019\", fmt);\n\tholidays[\"09/16/2019\"] = moment(\"09/16/2019\", fmt);\n\tholidays[\"09/23/2019\"] = moment(\"09/23/2019\", fmt);\n\tholidays[\"10/14/2019\"] = moment(\"10/14/2019\", fmt);\n\tholidays[\"10/22/2019\"] = moment(\"10/22/2019\", fmt);\n\tholidays[\"11/04/2019\"] = moment(\"11/04/2019\", fmt);\n\tholidays[\"11/23/2019\"] = moment(\"11/23/2019\", fmt);\n\n\tif(moment.isMoment(v)){\n\t\tif(v.isoWeekday() === 7 || v.isoWeekday() === 6){\n\t\t\treturn false;\n\t\t}\n\t\tif(holidays[v.format(fmt)]){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nconst descr = (<div>ken's test</div>);\n\nReactDOM.render(<div><div><MacroDateInput isBizDate={isBz}/></div>{descr}</div>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}